<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>올인원 1:1 화상채팅</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="container" id="main-section">
    <h2>1:1 실시간 화상채팅</h2>
    <button onclick="showTeacher()">교사로 시작</button>
    <button onclick="showStudent()">학생으로 입장</button>
</div>
<div class="container hidden" id="teacher-auth">
  <h3>교사 인증</h3>
  <label>비밀번호 입력: <input type="password" id="teacher-pw"></label>
  <button onclick="teacherLogin()">확인</button>
  <p id="teacher-auth-msg" style="color:red;"></p>
</div>
<div class="container hidden" id="teacher-create">
  <h3>강의방 생성</h3>
  <label>강의방 ID: <input type="text" id="room-id"></label>
  <label>접속 비밀번호:<input type="text" id="room-pw"></label>
  <button onclick="createRoom()">강의방 생성</button>
  <div id="url-share"></div>
</div>
<div class="container hidden" id="student-join">
  <h3>강의방 입장</h3>
  <label>강의방 ID: <input type="text" id="join-room-id"></label>
  <label>접속 비밀번호: <input type="text" id="join-room-pw"></label>
  <label>이름: <input type="text" id="join-name"></label>
  <button onclick="joinRoomByInfo()">입장</button>
</div>
<div class="container hidden" id="student-url-join">
  <h3>이름 입력</h3>
  <label>이름: <input type="text" id="url-join-name"></label>
  <button onclick="joinRoomByUrl()">입장</button>
</div>
<div class="container hidden" id="video-section">
  <div id="connection-msg">서로 연결되었습니다!</div>
  <h3 id="role-title"></h3>
  <div id="video-chat-wrap">
    <div id="video-box">
      <div class="video-wrap">
        <div class="controls">
          <button id="fullscreen-my" class="sm" title="전체화면" onclick="fullscreenVideo('my-video')">⛶</button>
          <button id="expand-my" class="sm" title="화면키우기" onclick="maximizeVideo('my-video','peer-video')">📺</button>
          <button id="capture-my" class="sm" title="캡쳐" onclick="captureVideo('my-video')">📸</button>
          <button id="rec-btn" class="sm" onclick="toggleRecord()">● 녹화</button>
        </div>
        <video id="my-video" autoplay playsinline muted></video>
        <div style="margin:5px 0;">
          <button class="sm on" id="switch-cam-btn" onclick="switchCamera()">카메라 전환</button>
          <button class="sm on" id="mic-toggle-btn" onclick="toggleMic()">마이크 끄기</button>
          <button class="sm on" id="cam-toggle-btn" onclick="toggleCam()">카메라 끄기</button>
          <button class="sm on" id="screen-share-btn" onclick="shareScreen()">화면공유</button>
        </div>
      </div>
      <div class="video-other">
        <div class="controls">
          <button id="fullscreen-peer" class="sm" title="전체화면" onclick="fullscreenVideo('peer-video')">⛶</button>
          <button id="expand-peer" class="sm" title="화면키우기" onclick="maximizeVideo('peer-video','my-video')">📺</button>
          <button id="capture-peer" class="sm" title="캡쳐" onclick="captureVideo('peer-video')">📸</button>
        </div>
        <video id="peer-video" autoplay playsinline></video>
      </div>
      <button id="whiteboard-btn" onclick="openWhiteboard()">✏️ 판서도구 오픈</button>
    </div>
    <div id="chat-panel">
      <div id="chat-box"></div>
      <div>
        <input type="text" id="chat-input" placeholder="채팅 입력" autocomplete="off">
        <button class="chat-send" onclick="sendMsg()">전송</button>
        <input type="file" id="file-input" title="파일첨부" />
      </div>
    </div>
  </div>
</div>
<!-- PIP/Big view UI -->
<div id="big-view" onclick="closeBigView(event)">
  <div id="big-main">
    <button onclick="closeBigView(event)">닫기</button>
    <!-- 동적으로 비디오 넣음 -->
  </div>
</div>
<!-- PeerJS CDN -->
<script src="https://cdn.jsdelivr.net/npm/peerjs@1.5.2/dist/peerjs.min.js"></script>
<!-- jsPDF for 판서 PDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="app.js"></script>
</body>
</html>
